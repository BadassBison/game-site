{"version":3,"sources":["webpack:///src/app/checkers/objects/checker.ts","webpack:///src/app/checkers/objects/box.ts","webpack:///src/app/checkers/objects/board.ts","webpack:///src/app/shared/player/player.ts","webpack:///src/app/checkers/checkers-routing.module.ts","webpack:///src/app/checkers/checkers.component.ts","webpack:///src/app/checkers/checkers.component.html","webpack:///src/app/checkers/checkers.module.ts"],"names":["Checker","state","this","player","position","radius","color","colors","id","isKing","center","getCenter","x","point","y","newPoint","Box","isOdd","side","cell","row","column","playable","unPlayable","checker","empty","unplayableSpace","width","height","absoluteCenter","findAbsoluteCenterPointOfRectangle","relativeCenter","findRelativeCenterPointOfRectangle","checkerBuilder","Math","floor","hasChecker","Board","players","boxSize","calculateBoxSize","topPadding","calculateTopPadding","sidePadding","calculateSidePadding","rows","columns","boxes","Map","playerOneCheckersRemaining","playerTwoCheckersRemaining","availableMoves","playerOne","playerTwo","boxCell","boxPoint","calculateBoxPositions","box","boxBuilder","buildChecker","set","index","innerWidth","innerHeight","buildBoard","getBoxPosition","decreasePlayersCheckers","removeChecker","idx","get","boxArray","push","moves","findIndex","move","end","allMoves","getAllMoves","filterMoves","startBox","filteredMoves","jumpMoves","forEach","checkIfOpponentChecker","checkIfJumpIsPossible","jumpIdx","getJumpPosition","endBox","start","isJump","jumpedBox","concat","currentIdx","moveIdx","p1","p2","makeKing","currentMove","currentBox","setAvailableMoves","filter","length","Player","playerState","order","name","numberOfPieces","routes","path","component","CheckersComponent","setProperties","setInitialState","getCheckerImageData","ctx","canvas","nativeElement","getContext","canvasPadding","playerBuilder","playerBarWidth","currentPlayer","holdingChecker","isPlaying","board","boardBuilder","halfBoxSize","checkerRadius","checkerImgPlayerOne","Image","src","drawCheckerImage","checkerImgPlayerTwo","checkerImgKingPlayerOne","checkerImgKingPlayerTwo","refreshCanvas","loadImages","setCanvasDimensions","draw","images","Promise","resolve","reject","img","onload","onerror","evt","boxIdx","getBoxIndex","clientX","clientY","getBox","availableMove","getAvailableMove","placeChecker","returnChecker","checkForValidChecker","pickUpChecker","lastBoxClicked","checkerCenter","getCheckerCenter","checkerHeld","updatePosition","additionalJumps","addChecker","removeCheckerFromBoard","checkForAdditionalJumps","checkIfKinged","checkForWin","console","log","changePlayer","resetAvailableMoves","checkerPosition","drawPlayerBar","drawBackground","drawBoard","drawHighlightedSpace","drawAvailableMoves","drawChecker","clearRect","fillStyle","fillRect","stroke","w","h","getBoxesArray","drawBox","drawImage","lineWidth","strokeStyle","strokeRect","color2","beginPath","arc","PI","fill","i","dif","moveTo","lineTo","toDataURL","handleClick","handleMouseMove","CheckersRoutingModule","forChild","CheckersModule"],"mappings":"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","file":"x","sourcesContent":["import { CheckerState } from '../interfaces/checker-state';\nimport { Player } from 'src/app/shared/player/player';\nimport { IPosition } from 'src/app/shared/interfaces/position';\nimport { Point } from 'src/app/shared/interfaces/point';\n\nexport class Checker {\n  static colors: string[] = ['dodgerblue', 'goldenrod'];\n\n  state: CheckerState;\n\n  static checkerBuilder(player: Player, position: IPosition, radius: number): Checker {\n    const state: CheckerState = {\n      color: Checker.colors[player.state.id],\n      player,\n      position,\n      radius,\n      isKing: false,\n      center: Checker.getCenter(position, radius)\n    };\n    return new Checker(state);\n  }\n\n  static getCenter(position: IPosition, radius: number): Point {\n    const x = position.point.x + radius;\n    const y = position.point.y + radius;\n    return { x, y };\n  }\n\n  constructor(state: CheckerState) {\n    this.state = state;\n  }\n\n\n  updatePosition(newPoint: Point): void {\n    this.state.position.point = newPoint;\n  }\n\n  makeKing(): void {\n    this.state.isKing = true;\n  }\n}\n","import { BoxState } from '../interfaces/box-state';\nimport { Checker } from './checker';\nimport { Player } from 'src/app/shared/player/player';\nimport { IPosition } from 'src/app/shared/interfaces/position';\nimport { UtilitiesService } from 'src/app/shared/utilities/utilities.service';\n\nexport class Box {\n  static colors = {\n    playable: 'palegreen',\n    unPlayable: 'darkgray'\n  };\n  static readonly empty: string = 'empty';\n  static readonly unplayableSpace: string = 'unplayable space';\n\n  state: BoxState;\n\n  static boxBuilder(isOdd: boolean, position: IPosition, side: number): Box {\n    const state: BoxState = {\n      id: `${position.cell.row}${position.cell.column}`,\n      color: isOdd ? Box.colors.playable : Box.colors.unPlayable,\n      checker: isOdd ? Box.empty : Box.unplayableSpace,\n      position,\n      width: side,\n      height: side,\n      absoluteCenter: UtilitiesService.findAbsoluteCenterPointOfRectangle(position, side, side),\n      relativeCenter: UtilitiesService.findRelativeCenterPointOfRectangle(side, side)\n    };\n    return new Box(state);\n  }\n\n  constructor(state: BoxState) {\n    this.state = state;\n  }\n\n  buildChecker(player: Player) {\n    const { cell, point } = this.state.position;\n    this.state.checker = Checker.checkerBuilder(player, { cell, point }, Math.floor(this.state.width * .46));\n  }\n\n  hasChecker(): boolean {\n    return (this.state.checker !== Box.empty && this.state.checker !== Box.unplayableSpace);\n  }\n\n  addChecker(checker: Checker): void {\n    checker.state.position.cell = this.state.position.cell;\n    checker.state.position.point = this.state.position.point;\n    this.state.checker = checker;\n  }\n\n  removeChecker(): void {\n    this.state.checker = Box.empty;\n  }\n\n  checkForValidChecker(player: Player): boolean {\n    if (this.hasChecker()) {\n      const checker: Checker = this.state.checker as Checker;\n      return player.state.id === checker.state.player.state.id;\n    }\n    return false;\n  }\n\n}\n","import { BoardState } from '../interfaces/board-state';\nimport { Box } from './box';\nimport { Move } from '../interfaces/move';\nimport { Player } from 'src/app/shared/player/player';\nimport { Cell } from 'src/app/shared/interfaces/cell';\nimport { Point } from 'src/app/shared/interfaces/point';\nimport { IPosition } from 'src/app/shared/interfaces/position';\n\nimport { Checker } from './checker';\n\nimport { UtilitiesService } from 'src/app/shared/utilities/utilities.service';\n\nexport class Board {\n  static rows = 8;\n  static columns = 8;\n  static boxSize: number;\n\n  state: BoardState;\n\n  static boardBuilder(players: Player[]): Board {\n    Board.boxSize = Board.calculateBoxSize();\n    const topPadding = Board.calculateTopPadding();\n    const sidePadding = Board.calculateSidePadding();\n\n    const state: BoardState = {\n      rows: Board.rows,\n      columns: Board.columns,\n      boxes: new Map<string, Box>(),\n      topPadding,\n      sidePadding,\n      playerOneCheckersRemaining: 12,\n      playerTwoCheckersRemaining: 12,\n      availableMoves: [],\n    };\n\n    const playerOne: Player = players[0];\n    const playerTwo: Player = players[1];\n\n    for (let row = 0; row < state.rows; row++){\n      for (let column = 0; column < state.columns; column++) {\n        const isOdd: boolean = UtilitiesService.isOdd(row + column);\n        const boxCell: Cell = { row, column };\n        const boxPoint: Point = Board.calculateBoxPositions(boxCell, state.topPadding, state.sidePadding);\n        const boxPosition: IPosition = { cell: boxCell, point: boxPoint };\n        const box: Box = Box.boxBuilder(isOdd, boxPosition, Board.boxSize);\n\n        if (isOdd) {\n          if (row < 3) {\n            box.buildChecker(playerOne);\n          } else if (row > 4) {\n            box.buildChecker(playerTwo);\n          }\n        }\n        state.boxes.set(`${row}${column}`, box);\n      }\n    }\n    return new Board(state);\n  }\n\n  static calculateBoxPositions(index: Cell, topPadding: number, sidePadding: number): Point {\n    const x = index.column * Board.boxSize + sidePadding;\n    const y = index.row * Board.boxSize + topPadding;\n    return { x, y };\n  }\n\n  static calculateBoxSize(): number {\n    if (innerWidth > innerHeight) {\n      return (innerHeight) / (Board.rows + 2);\n    } else {\n      return (innerWidth) / (Board.rows + 2);\n    }\n  }\n\n  static calculateTopPadding(): number {\n    if (innerWidth > innerHeight) {\n      return Board.boxSize;\n    } else {\n      const boardSize = Board.boxSize * 8;\n      return (innerHeight - boardSize) / 2;\n    }\n  }\n\n  static calculateSidePadding(): number {\n    if (innerWidth > innerHeight) {\n      const boardSize = Board.boxSize * 8;\n      return (innerWidth - boardSize) / 2;\n    } else {\n      return Board.boxSize;\n    }\n  }\n\n  constructor(state: BoardState) {\n    this.state = state;\n  }\n\n  setupBoardState(players: Player[]): void {\n    this.state = {\n      rows: 8,\n      columns: 8,\n      boxes: new Map<string, Box>(),\n      topPadding: null,\n      sidePadding: null,\n      playerOneCheckersRemaining: 12,\n      playerTwoCheckersRemaining: 12,\n      availableMoves: null,\n    };\n\n    this.buildBoard(players);\n    this.state.availableMoves = [];\n  }\n\n  buildBoard(players: Player[]) {\n    const playerOne: Player = players[0];\n    const playerTwo: Player = players[1];\n    this.state.boxes = new Map<string, Box>();\n\n    for (let row = 0; row < this.state.rows; row++){\n      for (let column = 0; column < this.state.columns; column++) {\n        const isOdd: boolean = UtilitiesService.isOdd(row + column);\n        const boxCell: Cell = { row, column };\n        const boxPoint: Point = this.getBoxPosition(row, column);\n        const boxPosition: IPosition = { cell: boxCell, point: boxPoint };\n        const box = Box.boxBuilder(isOdd, boxPosition, Board.boxSize);\n\n        if (isOdd) {\n          if (row < 3) {\n            box.buildChecker(playerOne);\n          } else if (row > 4) {\n            box.buildChecker(playerTwo);\n          }\n        }\n        this.state.boxes.set(`${row}${column}`, box);\n      }\n    }\n  }\n\n  removeCheckerFromBoard(box: Box): void {\n    this.decreasePlayersCheckers(box.state.checker as Checker);\n    box.removeChecker();\n  }\n\n  decreasePlayersCheckers(checker: Checker): void {\n    const player = checker.state.player.state.id;\n\n    if (player === 0) {\n      this.state.playerOneCheckersRemaining--;\n    } else {\n      this.state.playerTwoCheckersRemaining--;\n    }\n  }\n\n  getBox(idx: Cell): Box {\n    return this.state.boxes.get(`${idx.row}${idx.column}`);\n  }\n\n  getBoxPosition(row: number, column: number): Point {\n    const x = column * Board.boxSize + this.state.sidePadding;\n    const y = row * Board.boxSize + Board.boxSize;\n    return { x, y };\n  }\n\n  getBoxIndex(x: number, y: number): Cell {\n    const row = Math.floor((y - this.state.topPadding - 40) / Board.boxSize);\n    const column = Math.floor((x - this.state.sidePadding) / Board.boxSize);\n    return { row, column };\n  }\n\n  getBoxesArray(): Box[] {\n    const boxArray: Box[] = [];\n    for (let row = 0; row < this.state.rows; row++) {\n      for (let column = 0; column < this.state.columns; column++) {\n        boxArray.push(this.state.boxes.get(`${row}${column}`));\n      }\n    }\n    return boxArray;\n  }\n\n  resetAvailableMoves(): void {\n    this.state.availableMoves = [];\n  }\n\n  getAllMoves(box: Box): Box[] {\n    const { isKing, player } = (box.state.checker as Checker).state;\n    const moves: Box[] = [];\n    const { row, column } = box.state.position.cell;\n\n    if (player.state.id === 1 || isKing) {\n      if (row > 0 && column > 0) {\n        moves.push(this.state.boxes.get(`${row - 1}${column -  1}`));\n      }\n      if (row > 0 && column < this.state.columns - 1) {\n        moves.push(this.state.boxes.get(`${row - 1}${column + 1}`));\n      }\n    }\n    if (player.state.id === 0 || isKing) {\n      if (row < this.state.rows - 1 && column > 0) {\n        moves.push(this.state.boxes.get(`${row + 1}${column - 1}`));\n      }\n      if (row < this.state.rows - 1 && column < this.state.columns - 1) {\n        moves.push(this.state.boxes.get(`${row + 1}${column + 1}`));\n      }\n    }\n\n    return moves;\n  }\n\n  getAvailableMove(box: Box): Move {\n    const idx = this.state.availableMoves.findIndex((move: Move) => {\n      // FIXME: does this check object equality\n      return move.end.state.position.cell === box.state.position.cell;\n    });\n    return this.state.availableMoves[idx];\n  }\n\n  setAvailableMoves(box: Box): void {\n    const allMoves: Box[] = this.getAllMoves(box);\n    this.state.availableMoves = this.filterMoves(box, allMoves);\n  }\n\n  filterMoves(startBox: Box, moves: Box[]): Move[] {\n    const filteredMoves: Move[] = [];\n    const jumpMoves: Move[] = [];\n    const { player } = (startBox.state.checker as Checker).state;\n\n    moves.forEach((move: Box) => {\n\n      if (move.hasChecker()) {\n        const isOpponentChecker: boolean = this.checkIfOpponentChecker(move, player.state.id);\n\n        if (isOpponentChecker) {\n          const isJumpPossible: boolean = this.checkIfJumpIsPossible(startBox.state.position.cell, move.state.position.cell);\n\n          if (isJumpPossible) {\n            const jumpIdx: Cell = this.getJumpPosition(startBox.state.position.cell, move.state.position.cell);\n            const endBox = this.state.boxes.get(`${jumpIdx.row}${jumpIdx.column}`);\n            const jumpMove: Move = { start: startBox, end: endBox, isJump: true, jumpedBox: move };\n            jumpMoves.push(jumpMove);\n          }\n        }\n      } else {\n        filteredMoves.push({ start: startBox, end: move, isJump: false, jumpedBox: null });\n      }\n    });\n\n    return jumpMoves.concat(filteredMoves);\n  }\n\n  checkIfOpponentChecker(move: Box, player: number): boolean {\n    const checker: Checker = (move.state.checker as Checker);\n    return player !== checker.state.player.state.id;\n  }\n\n  checkIfJumpIsPossible(currentIdx: Cell, moveIdx: Cell): boolean {\n\n    const { row, column }: Cell = this.getJumpPosition(currentIdx, moveIdx);\n    if (row < 0 || row >= 8 || column < 0 || column >= 8) { return false; }\n\n    const box: Box = this.state.boxes.get(`${row}${column}`);\n    const isBoxEmpty: boolean = !box.hasChecker();\n    return isBoxEmpty;\n  }\n\n  getJumpPosition(p1: Cell, p2: Cell): Cell {\n    const dx = p1.column - p2.column;\n    const dy = p1.row - p2.row;\n    return { row: p2.row - dy, column: p2.column - dx };\n  }\n\n  checkForWin(player: number): boolean {\n    if (player === 0) {\n      return this.state.playerTwoCheckersRemaining === 0;\n    } else {\n      return this.state.playerOneCheckersRemaining === 0;\n    }\n  }\n\n  checkIfKinged(player: number, row: number, checker: Checker) {\n    if (player === 0 && row === this.state.rows - 1) {\n      checker.makeKing();\n    } else if (player === 1 && row === 0) {\n      checker.makeKing();\n    }\n  }\n\n  checkForAdditionalJumps(currentMove: Move): boolean {\n    const currentBox: Box = currentMove.end;\n    this.setAvailableMoves(currentBox);\n    const jumpMoves: Move[] = this.state.availableMoves.filter((move: Move) => {\n      return move.isJump;\n    });\n\n    if (jumpMoves.length > 0) {\n      this.state.availableMoves = jumpMoves;\n      this.state.availableMoves.push({start: currentBox, end: currentBox, isJump: false, jumpedBox: null});\n      return true;\n    }\n    return false;\n  }\n\n}\n","import { PlayerState } from './playerState';\n\nexport class Player {\n  state: PlayerState;\n\n  static playerBuilder(order: number, color: string): Player {\n    const state: PlayerState = {\n      id: order - 1,\n      name: `Player ${order}`,\n      color,\n      numberOfPieces: 16\n    };\n    return new Player(state);\n  }\n\n  constructor(playerState: PlayerState) {\n    this.state = playerState;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CheckersComponent } from './checkers.component';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CheckersComponent\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class CheckersRoutingModule { }\n","import { Component, ElementRef, ViewChild, AfterViewInit, OnInit } from '@angular/core';\nimport { Board } from './objects/board';\nimport { Player } from '../shared/player/player';\nimport { Checker } from './objects/checker';\nimport { Box } from './objects/box';\nimport { Move } from './interfaces/move';\nimport { Point } from '../shared/interfaces/point';\n\n@Component({\n  selector: 'app-checkers',\n  templateUrl: 'checkers.component.html',\n  styleUrls: ['checkers.component.scss']\n})\nexport class CheckersComponent implements OnInit, AfterViewInit {\n\n  @ViewChild('checkers', { static: true })\n  canvas: ElementRef<HTMLCanvasElement>;\n  canvasPadding: number;\n\n  private colors = {\n    playerOne: 'dodgerblue',\n    playerTwo: 'goldenrod'\n  };\n\n  private ctx: CanvasRenderingContext2D;\n  private board: Board;\n  private playerOne: Player;\n  private playerTwo: Player;\n  private currentPlayer: Player;\n  private holdingChecker: boolean;\n  private checkerHeld: Checker;\n  private halfBoxSize: number;\n  private lastBoxClicked: Box;\n  private isPlaying: boolean;\n  private checkerImgPlayerOne: HTMLImageElement;\n  private checkerImgPlayerTwo: HTMLImageElement;\n  private checkerImgKingPlayerOne: HTMLImageElement;\n  private checkerImgKingPlayerTwo: HTMLImageElement;\n  private playerBarWidth: number;\n\n  constructor() {}\n\n  ngOnInit() {\n    this.setProperties();\n    this.setInitialState();\n  }\n\n  ngAfterViewInit() {\n    this.getCheckerImageData();\n  }\n\n  // Does not change from game to game\n  setProperties() {\n    this.ctx = this.canvas.nativeElement.getContext('2d');\n    this.canvasPadding = 40;\n  }\n\n  // Changes from game to game\n  setInitialState() {\n\n    this.playerOne = Player.playerBuilder(1, this.colors.playerOne);\n    this.playerTwo = Player.playerBuilder(2, this.colors.playerTwo);\n    this.playerBarWidth = 20;\n    this.currentPlayer = this.playerOne;\n    this.holdingChecker = false;\n    this.isPlaying = true;\n    this.board = Board.boardBuilder([this.playerOne, this.playerTwo]);\n    this.halfBoxSize = Board.boxSize * .5;\n  }\n\n  setCanvasDimensions(): void {\n    this.canvas.nativeElement.width = innerWidth;\n    this.canvas.nativeElement.height = innerHeight - this.canvasPadding;\n  }\n\n  async getCheckerImageData(): Promise<void> {\n    const x = this.halfBoxSize;\n    const y = this.halfBoxSize;\n    const checkerRadius = Board.boxSize * 0.46;\n\n    this.canvas.nativeElement.width = Board.boxSize;\n    this.canvas.nativeElement.height = Board.boxSize;\n\n    this.checkerImgPlayerOne = new Image();\n    this.checkerImgPlayerOne.src = this.drawCheckerImage(x, y, checkerRadius, this.colors.playerOne, false);\n\n    this.checkerImgPlayerTwo = new Image();\n    this.checkerImgPlayerTwo.src = this.drawCheckerImage(x, y, checkerRadius, this.colors.playerTwo, false);\n\n    this.checkerImgKingPlayerOne = new Image();\n    this.checkerImgKingPlayerOne.src = this.drawCheckerImage(x, y, checkerRadius, this.colors.playerOne, true);\n\n    this.checkerImgKingPlayerTwo = new Image();\n    this.checkerImgKingPlayerTwo.src = this.drawCheckerImage(x, y, checkerRadius, this.colors.playerTwo, true);\n\n    this.refreshCanvas();\n\n    await this.loadImages([\n      this.checkerImgPlayerOne,\n      this.checkerImgPlayerTwo,\n      this.checkerImgKingPlayerOne,\n      this.checkerImgKingPlayerTwo\n    ]);\n\n    this.setCanvasDimensions();\n    this.draw();\n  }\n\n  async loadImages(images: HTMLImageElement[]) {\n    return new Promise((resolve, reject) => {\n      for (const img of images) {\n        img.onload = () => resolve(img);\n        img.onerror = reject;\n      }\n    });\n  }\n\n  getCheckerCenter(x: number, y: number): Point {\n    x = x - this.halfBoxSize;\n    y = y - 2 * this.halfBoxSize;\n    return { x, y };\n  }\n\n  handleClick(evt: MouseEvent): void {\n\n    if (this.isPlaying) {\n      const boxIdx = this.board.getBoxIndex(evt.clientX, evt.clientY);\n      const box = this.board.getBox(boxIdx);\n\n      if (box) {\n\n        if (this.holdingChecker) {\n          const availableMove: Move = this.board.getAvailableMove(box);\n\n          if (availableMove) {\n            this.placeChecker(availableMove);\n          } else {\n            this.returnChecker();\n          }\n        } else {\n          const hasChecker = box.checkForValidChecker(this.currentPlayer);\n\n          if (hasChecker) {\n            this.board.setAvailableMoves(box);\n\n            const hasAvailableMoves = this.board.state.availableMoves.length > 0;\n            if (hasAvailableMoves) { this.pickUpChecker(box); }\n          }\n          this.lastBoxClicked = box;\n        }\n        this.draw();\n      }\n    }\n  }\n\n  handleMouseMove(evt: MouseEvent): void {\n    if (this.holdingChecker) {\n      const checkerCenter: Point = this.getCheckerCenter(evt.clientX, evt.clientY);\n      this.checkerHeld.updatePosition(checkerCenter);\n      this.draw();\n    }\n  }\n\n  pickUpChecker(box: Box): void {\n    this.holdingChecker = true;\n    this.checkerHeld = box.state.checker as Checker;\n    box.removeChecker();\n  }\n\n  placeChecker(move: Move) {\n    const player = this.currentPlayer.state.id;\n    const row = move.end.state.position.cell.row;\n    move.end.addChecker(this.checkerHeld);\n\n    let additionalJumps: boolean;\n\n    if (move.isJump) {\n      this.board.removeCheckerFromBoard(move.jumpedBox);\n      additionalJumps = this.board.checkForAdditionalJumps(move);\n    }\n\n    if (additionalJumps) {\n\n      this.pickUpChecker(move.end);\n\n    } else {\n\n      if (!this.checkerHeld.state.isKing) {\n        this.board.checkIfKinged(player, row, this.checkerHeld);\n      }\n\n      const isWin = this.board.checkForWin(this.currentPlayer.state.id);\n\n      if (isWin) {\n        this.isPlaying = false;\n        console.log(`Player ${this.currentPlayer.state.id + 1} wins!`);\n      }\n\n      this.changePlayer();\n      this.board.resetAvailableMoves();\n      this.holdingChecker = false;\n      this.checkerHeld = null;\n    }\n  }\n\n  returnChecker() {\n    const { x, y } = this.lastBoxClicked.state.absoluteCenter;\n    const checkerPosition = this.getCheckerCenter(x, y);\n    this.checkerHeld.updatePosition(checkerPosition);\n    this.lastBoxClicked.addChecker(this.checkerHeld);\n    this.board.resetAvailableMoves();\n    this.holdingChecker = false;\n    this.checkerHeld = null;\n  }\n\n  changePlayer(): void {\n    if (this.currentPlayer.state.id === 0) {\n      this.currentPlayer = this.playerTwo;\n    } else {\n      this.currentPlayer = this.playerOne;\n    }\n  }\n\n  draw(): void {\n    this.refreshCanvas();\n    this.drawPlayerBar();\n    this.drawBackground();\n    this.drawBoard();\n\n    if (this.board.state.availableMoves.length > 0) {\n      this.drawHighlightedSpace();\n      this.drawAvailableMoves();\n    }\n    if (this.holdingChecker) { this.drawChecker(this.checkerHeld); }\n  }\n\n  refreshCanvas() {\n    this.ctx.clearRect(0, 0, innerWidth, innerHeight - (2 * this.canvasPadding));\n  }\n\n  drawPlayerBar() {\n    this.ctx.fillStyle = this.currentPlayer.state.color;\n    this.ctx.fillRect(0, 0, innerWidth, innerHeight - (this.canvasPadding));\n  }\n\n  drawBackground() {\n    const stroke = this.playerBarWidth;\n    const x = stroke;\n    const y = stroke;\n    const w = this.canvas.nativeElement.width - (2 * stroke);\n    const h = this.canvas.nativeElement.height - (2 * stroke);\n\n    this.ctx.fillStyle = 'ivory';\n    this.ctx.fillRect(x, y, w, h);\n  }\n\n  drawBoard() {\n    const boxes = this.board.getBoxesArray();\n\n    boxes.forEach(box => {\n      this.drawBox(box);\n\n      if (box.hasChecker()) {\n        const checker = box.state.checker as Checker;\n        this.drawChecker(checker);\n      }\n    });\n  }\n\n  drawChecker(checker: Checker) {\n\n    const { x, y } = checker.state.position.point;\n\n    if (checker.state.player.state.id === 0) {\n\n      if (checker.state.isKing) {\n        this.ctx.drawImage(this.checkerImgKingPlayerOne, x, y);\n      } else {\n        this.ctx.drawImage(this.checkerImgPlayerOne, x, y);\n      }\n    } else {\n      if (checker.state.isKing) {\n        this.ctx.drawImage(this.checkerImgKingPlayerTwo, x, y);\n      } else {\n        this.ctx.drawImage(this.checkerImgPlayerTwo, x, y);\n      }\n    }\n  }\n\n  drawBox(box: Box) {\n    const { color, width, height } = box.state;\n    const { x, y } = box.state.position.point;\n    this.ctx.fillStyle = color;\n    this.ctx.fillRect(x, y, width, height);\n\n    this.ctx.lineWidth = 0.5;\n    this.ctx.strokeStyle = 'black';\n    this.ctx.strokeRect(x, y, width, height);\n  }\n\n  drawCheckerImage(x: number, y: number, radius: number, color: string, isKing: boolean) {\n    const color2 = color === this.colors.playerOne ? 'deepskyblue' : 'gold';\n\n    // Outer Circle\n    this.ctx.fillStyle = color;\n    this.ctx.beginPath();\n    this.ctx.arc(x, y, radius, 0, 2 * Math.PI, true);\n    this.ctx.fill();\n\n    // Outer Grooves\n    this.ctx.strokeStyle = color2;\n    this.ctx.lineWidth = Board.boxSize * .05;\n\n    for (let i = 0; i < 2 * Math.PI; i += 0.18) {\n      this.ctx.beginPath();\n      this.ctx.arc(x, y, radius - 4, i, i + 0.04, false);\n      this.ctx.stroke();\n    }\n\n    // Inner Circle\n    this.ctx.fillStyle = color2;\n    this.ctx.beginPath();\n    this.ctx.arc(x, y, radius - 10, 0, 2 * Math.PI, true);\n    this.ctx.fill();\n\n    // Inner Crown\n    if (isKing) {\n      this.ctx.strokeStyle = color;\n      this.ctx.lineWidth = Board.boxSize * .05;\n      const dif = Board.boxSize / 95;\n      this.ctx.beginPath();\n      this.ctx.moveTo(x + 16 * dif, y + 15 * dif);\n      this.ctx.lineTo(x - 15 * dif, y + 15 * dif);\n      this.ctx.lineTo(x - 20 * dif, y - 10 * dif);\n      this.ctx.lineTo(x - 10 * dif, y           );\n      this.ctx.lineTo(x,            y - 20 * dif);\n      this.ctx.lineTo(x + 10 * dif, y           );\n      this.ctx.lineTo(x + 20 * dif, y - 10 * dif);\n      this.ctx.lineTo(x + 15 * dif, y + 15 * dif);\n    }\n\n    this.ctx.stroke();\n\n    return this.canvas.nativeElement.toDataURL('image/webp') as string;\n  }\n\n  drawHighlightedSpace() {\n    const { x, y } = this.lastBoxClicked.state.position.point;\n    const { width, height } = this.lastBoxClicked.state;\n\n    this.ctx.fillStyle = 'white';\n    this.ctx.fillRect(x, y, width, height);\n  }\n\n  drawAvailableMoves() {\n    this.ctx.lineWidth = 6;\n\n    this.board.state.availableMoves.forEach((move: Move) => {\n      const { x, y } = move.end.state.position.point;\n      const { width, height } = move.end.state;\n\n      this.ctx.strokeStyle = 'yellow';\n      this.ctx.strokeRect(x, y, width, height);\n    });\n  }\n}\n","<canvas #checkers class=\"canvas\" (click)=\"handleClick($event)\" (mousemove)=\"handleMouseMove($event)\"></canvas>\n<!-- <button>Rotate</button> -->\n","import { NgModule } from '@angular/core';\nimport { SharedModule } from '../shared/shared.module';\nimport { CheckersRoutingModule } from './checkers-routing.module';\n\nimport { CheckersComponent } from './checkers.component';\n\n@NgModule({\n  declarations: [\n    CheckersComponent\n  ],\n  imports: [\n    SharedModule,\n    CheckersRoutingModule\n  ],\n  exports: [\n    CheckersComponent\n  ]\n})\nexport class CheckersModule { }\n"]}