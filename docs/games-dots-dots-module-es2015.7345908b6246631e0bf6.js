(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{qFff:function(t,s,e){"use strict";e.r(s),e.d(s,"DotsModule",(function(){return S}));var a=e("PCNd"),i=e("iInd");class n{constructor(t){this.state=t}static dotBuilder(t,s,e,a){return new n({id:`${e}${a}`,x:t,y:s,column:e,row:a,radius:8,connections:{north:null,east:null,south:null,west:null}})}addConnection(t,s){switch(t.toLocaleLowerCase()){case"north":this.state.connections.north=s;break;case"east":this.state.connections.east=s;break;case"south":this.state.connections.south=s;break;case"west":this.state.connections.west=s}}}class o{constructor(t){this.state=t}static boardBuilder(t,s,e,a,i){const r=a/t,c=e/s,h=r/2,l=c/2,d=new Map;for(let u=0;u<t;u++)for(let t=0;t<s;t++){const s=n.dotBuilder(t*c+l,u*r+h,t,u);d.set(`${o.parseIdx(t)}${o.parseIdx(u)}`,s)}return new o({dots:d,rows:t,columns:s,width:e,height:a,rowSpacing:r,columnSpacing:c,topPadding:h,sidePadding:l,totalSquaresLeft:(t-1)*(s-1),players:i,currentPlayer:i[0],startingDot:null,endingDot:null,currentNeighbors:null})}static parseIdx(t){return t<=9?"0"+t:""+t}handleClick(t){this.state.startingDot?this.endingMove(t):this.startingMove(t)}startingMove(t){this.calculateDotClicked(t)&&this.getAvailableNeighbors()}endingMove(t){const s=this.calculateDotClicked(t),e=this.state.totalSquaresLeft;s&&(this.makeConnections(),e===this.state.totalSquaresLeft&&this.changePlayer()),this.state.startingDot=null,this.state.endingDot=null}changePlayer(){this.state.currentPlayer=this.state.players[(this.state.currentPlayer.state.id+1)%2]}calculateDotClicked({clientX:t,clientY:s}){var e,a,i,n,r,c,h,l,d;s-=40;const u=Math.floor(t/(this.state.width/this.state.columns)),g=Math.floor(s/(this.state.height/this.state.rows)),b=this.state.dots.get(`${o.parseIdx(u)}${o.parseIdx(g)}`);if(this.state.startingDot&&(null===(a=null===(e=this.state.currentNeighbors)||void 0===e?void 0:e.north)||void 0===a?void 0:a.state.id)!==b.state.id&&(null===(n=null===(i=this.state.currentNeighbors)||void 0===i?void 0:i.east)||void 0===n?void 0:n.state.id)!==b.state.id&&(null===(c=null===(r=this.state.currentNeighbors)||void 0===r?void 0:r.south)||void 0===c?void 0:c.state.id)!==b.state.id&&(null===(l=null===(h=this.state.currentNeighbors)||void 0===h?void 0:h.west)||void 0===l?void 0:l.state.id)!==b.state.id)return!1;const p=s-b.state.y,m=t-b.state.x;return Math.sqrt(p*p+m*m)<Math.floor(1.5*b.state.radius)?null!==this.state.startingDot&&(null===(d=this.state.startingDot)||void 0===d?void 0:d.state.id)!==b.state.id?(this.state.endingDot=b,!0):!this.state.startingDot&&(this.state.startingDot=b,!0):(this.state.startingDot=null,!1)}getAvailableNeighbors(){const{column:t,row:s}=this.state.startingDot.state,{connections:e}=this.state.startingDot.state;let a,i,n,r;!e.north&&s>0&&(a=this.state.dots.get(`${o.parseIdx(t)}${o.parseIdx(s-1)}`)),!e.east&&t<this.state.columns-1&&(i=this.state.dots.get(`${o.parseIdx(t+1)}${o.parseIdx(s)}`)),!e.south&&s<this.state.rows-1&&(n=this.state.dots.get(`${o.parseIdx(t)}${o.parseIdx(s+1)}`)),!e.west&&t>0&&(r=this.state.dots.get(`${o.parseIdx(t-1)}${o.parseIdx(s)}`)),this.state.currentNeighbors={north:a,east:i,south:n,west:r}}makeConnections(){var t,s,e,a,i,n,o,r;let c;const h=this.state.currentNeighbors;(null===(t=h.north)||void 0===t?void 0:t.state.id)===(null===(s=this.state.endingDot)||void 0===s?void 0:s.state.id)&&(c="north",this.state.startingDot.addConnection("north",this.state.endingDot),this.state.endingDot.addConnection("south",this.state.startingDot)),(null===(e=h.east)||void 0===e?void 0:e.state.id)===(null===(a=this.state.endingDot)||void 0===a?void 0:a.state.id)&&(c="east",this.state.startingDot.addConnection("east",this.state.endingDot),this.state.endingDot.addConnection("west",this.state.startingDot)),(null===(i=h.south)||void 0===i?void 0:i.state.id)===(null===(n=this.state.endingDot)||void 0===n?void 0:n.state.id)&&(c="south",this.state.startingDot.addConnection("south",this.state.endingDot),this.state.endingDot.addConnection("north",this.state.startingDot)),(null===(o=h.west)||void 0===o?void 0:o.state.id)===(null===(r=this.state.endingDot)||void 0===r?void 0:r.state.id)&&(c="west",this.state.startingDot.addConnection("west",this.state.endingDot),this.state.endingDot.addConnection("east",this.state.startingDot)),this.detectFullSquare(c)}detectFullSquare(t){"north"===t||"south"===t?(this.checkLeftSquare(t),this.checkRightSquare(t)):"west"!==t&&"east"!==t||(this.checkTopSquare(t),this.checkBottomSquare(t))}checkLeftSquare(t){var s,e;(null===(s=this.state.startingDot)||void 0===s?void 0:s.state.connections.west)&&(null===(e=this.state.endingDot)||void 0===e?void 0:e.state.connections.west)&&this.state.startingDot.state.connections.west.state.connections[t]&&("north"===t?0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.endingDot.state.connections.west):this.state.players[1].state.squares.push(this.state.endingDot.state.connections.west):0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.startingDot.state.connections.west):this.state.players[1].state.squares.push(this.state.startingDot.state.connections.west),this.state.totalSquaresLeft--)}checkRightSquare(t){var s,e;(null===(s=this.state.startingDot)||void 0===s?void 0:s.state.connections.east)&&(null===(e=this.state.endingDot)||void 0===e?void 0:e.state.connections.east)&&this.state.startingDot.state.connections.east.state.connections[t]&&("north"===t?0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.endingDot):this.state.players[1].state.squares.push(this.state.endingDot):0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.startingDot):this.state.players[1].state.squares.push(this.state.startingDot),this.state.totalSquaresLeft--)}checkTopSquare(t){var s,e;(null===(s=this.state.startingDot)||void 0===s?void 0:s.state.connections.north)&&(null===(e=this.state.endingDot)||void 0===e?void 0:e.state.connections.north)&&this.state.startingDot.state.connections.north.state.connections[t]&&("west"===t?0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.endingDot.state.connections.north):this.state.players[1].state.squares.push(this.state.endingDot.state.connections.north):0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.startingDot.state.connections.north):this.state.players[1].state.squares.push(this.state.startingDot.state.connections.north),this.state.totalSquaresLeft--)}checkBottomSquare(t){var s,e;(null===(s=this.state.startingDot)||void 0===s?void 0:s.state.connections.south)&&(null===(e=this.state.endingDot)||void 0===e?void 0:e.state.connections.south)&&this.state.startingDot.state.connections.south.state.connections[t]&&("west"===t?0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.endingDot):this.state.players[1].state.squares.push(this.state.endingDot):0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.startingDot):this.state.players[1].state.squares.push(this.state.startingDot),this.state.totalSquaresLeft--)}}class r{constructor(t){this.state=t}static playerBuilder(t,s,e){return new r({id:t-1,name:e||"Player "+t,color:s,squares:[]})}}class c{constructor(t){this.highlightRadius=16,this.canvas=t,this.ctx=this.canvas.getContext("2d")}draw(t,s){s?(this.clearCanvas(),this.drawPlayerBorder(t),this.drawDots(t.state.dots),this.fillSquares(t)):this.highlightDots(t)}setCanvas(t){this.canvas=t,this.ctx=this.canvas.getContext("2d")}highlightDots(t){this.highlightClickedDot(t.state.startingDot),this.highlightNeighbors(t)}clearCanvas(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}drawPlayerBorder(t){this.ctx.strokeStyle=t.state.currentPlayer.state.color,this.ctx.lineWidth=30,this.ctx.strokeRect(0,0,this.canvas.width,this.canvas.height)}drawDots(t){t.forEach(t=>{this.drawDot(t,!1),this.drawConnections(t)})}drawDot(t,s){this.ctx.fillStyle=s?"pink":"black",this.ctx.beginPath(),this.ctx.arc(t.state.x,t.state.y,t.state.radius,0,2*Math.PI,!0),this.ctx.fill()}drawConnections(t){const{north:s,east:e,south:a,west:i}=t.state.connections;this.ctx.strokeStyle="black",this.ctx.lineWidth=6,this.ctx.beginPath(),this.ctx.moveTo(t.state.x,t.state.y),s&&(this.ctx.lineTo(s.state.x,s.state.y),this.ctx.moveTo(t.state.x,t.state.y)),e&&(this.ctx.lineTo(e.state.x,e.state.y),this.ctx.moveTo(t.state.x,t.state.y)),a&&(this.ctx.lineTo(a.state.x,a.state.y),this.ctx.moveTo(t.state.x,t.state.y)),i&&this.ctx.lineTo(i.state.x,i.state.y),this.ctx.stroke()}fillSquare(t,s,e,a){this.ctx.fillStyle=s.state.color,this.ctx.fillRect(t.state.x,t.state.y,e,a)}fillSquares(t){const s=t.state.columnSpacing,e=t.state.rowSpacing,a=t.state.players[0];a.state.squares.forEach(t=>{this.fillSquare(t,a,s,e)});const i=t.state.players[1];t.state.players[1].state.squares.forEach(t=>{this.fillSquare(t,i,s,e)})}highlightClickedDot(t){this.drawDot(t,!0)}highlightNeighbors(t){const{north:s,east:e,south:a,west:i}=t.state.currentNeighbors;this.ctx.strokeStyle="goldenrod",this.ctx.lineWidth=4,this.ctx.beginPath(),s&&this.ctx.arc(s.state.x,s.state.y,this.highlightRadius,0,2*Math.PI,!0),e&&(this.ctx.moveTo(e.state.x+this.highlightRadius,e.state.y),this.ctx.arc(e.state.x,e.state.y,this.highlightRadius,0,2*Math.PI,!0)),a&&(this.ctx.moveTo(a.state.x+this.highlightRadius,a.state.y),this.ctx.arc(a.state.x,a.state.y,this.highlightRadius,0,2*Math.PI,!0)),i&&(this.ctx.moveTo(i.state.x+this.highlightRadius,i.state.y),this.ctx.arc(i.state.x,i.state.y,this.highlightRadius,0,2*Math.PI,!0)),this.ctx.stroke()}}var h=e("8Y7J"),l=e("SVse"),d=e("PDjf"),u=e("Dxy4"),g=e("Q2Ze"),b=e("e6WT"),p=e("s7LF"),m=e("Tj54"),f=e("ZTz/"),v=e("UhP/");const y=["dots"];function w(t,s){if(1&t&&(h.Rb(0,"mat-option",15),h.pc(1),h.Qb()),2&t){const t=s.$implicit;h.dc("value",t),h.Bb(1),h.qc(t)}}function D(t,s){if(1&t&&(h.Rb(0,"mat-option",15),h.pc(1),h.Qb()),2&t){const t=s.$implicit;h.dc("value",t),h.Bb(1),h.qc(t)}}function x(t,s){if(1&t){const t=h.Sb();h.Rb(0,"mat-card-content"),h.Rb(1,"mat-form-field",8),h.Rb(2,"mat-label"),h.pc(3,"Number of Rows"),h.Qb(),h.Rb(4,"input",9),h.Yb("ngModelChange",(function(s){return h.hc(t),h.ac(2).rows=s})),h.Qb(),h.Rb(5,"mat-icon",10),h.pc(6,"scatter_plot"),h.Qb(),h.Qb(),h.Rb(7,"mat-form-field",8),h.Rb(8,"mat-label"),h.pc(9,"Number of Columns"),h.Qb(),h.Rb(10,"input",11),h.Yb("ngModelChange",(function(s){return h.hc(t),h.ac(2).columns=s})),h.Qb(),h.Rb(11,"mat-icon",10),h.pc(12,"scatter_plot"),h.Qb(),h.Qb(),h.Rb(13,"mat-card"),h.Rb(14,"mat-form-field",8),h.Rb(15,"mat-label"),h.pc(16,"Player 1 Name"),h.Qb(),h.Rb(17,"input",12),h.Yb("ngModelChange",(function(s){return h.hc(t),h.ac(2).playerOneName=s})),h.Qb(),h.Rb(18,"mat-icon",10),h.pc(19,"face"),h.Qb(),h.Qb(),h.Rb(20,"mat-form-field",8),h.Rb(21,"mat-label"),h.pc(22,"Color"),h.Qb(),h.Rb(23,"mat-select",13),h.Yb("valueChange",(function(s){return h.hc(t),h.ac(2).playerOneColor=s})),h.Rb(24,"mat-option"),h.pc(25,"None"),h.Qb(),h.nc(26,w,2,2,"mat-option",14),h.Qb(),h.Qb(),h.Qb(),h.Rb(27,"mat-card"),h.Rb(28,"mat-form-field",8),h.Rb(29,"mat-label"),h.pc(30,"Player 2 Name"),h.Qb(),h.Rb(31,"input",12),h.Yb("ngModelChange",(function(s){return h.hc(t),h.ac(2).playerTwoName=s})),h.Qb(),h.Rb(32,"mat-icon",10),h.pc(33,"face"),h.Qb(),h.Qb(),h.Rb(34,"mat-form-field",8),h.Rb(35,"mat-label"),h.pc(36,"Color"),h.Qb(),h.Rb(37,"mat-select",13),h.Yb("valueChange",(function(s){return h.hc(t),h.ac(2).playerTwoColor=s})),h.Rb(38,"mat-option"),h.pc(39,"None"),h.Qb(),h.nc(40,D,2,2,"mat-option",14),h.Qb(),h.Qb(),h.Qb(),h.Qb()}if(2&t){const t=h.ac(2);h.Bb(4),h.dc("ngModel",t.rows),h.Bb(6),h.dc("ngModel",t.columns),h.Bb(7),h.dc("ngModel",t.playerOneName),h.Bb(6),h.dc("value",t.playerOneColor),h.Bb(3),h.dc("ngForOf",t.colors),h.Bb(5),h.dc("ngModel",t.playerTwoName),h.Bb(6),h.dc("value",t.playerTwoColor),h.Bb(3),h.dc("ngForOf",t.colors)}}function C(t,s){1&t&&(h.Rb(0,"mat-card-content"),h.Rb(1,"h3"),h.pc(2,"Information"),h.Qb(),h.Rb(3,"ul"),h.Rb(4,"li"),h.pc(5,"Connect dots to make squares"),h.Qb(),h.Rb(6,"li"),h.pc(7,"Making Squares gives you an extra turn"),h.Qb(),h.Rb(8,"li"),h.pc(9,"Person who makes the most squares wins"),h.Qb(),h.Rb(10,"li"),h.pc(11,"Press 'm' for the menu"),h.Qb(),h.Qb(),h.Qb())}function R(t,s){if(1&t){const t=h.Sb();h.Rb(0,"button",6),h.Yb("click",(function(){return h.hc(t),h.ac(2).continueGame()})),h.pc(1,"CONTINUE"),h.Qb()}}function q(t,s){if(1&t){const t=h.Sb();h.Rb(0,"div",2),h.Rb(1,"mat-card",3),h.Rb(2,"mat-card-header"),h.Rb(3,"mat-card-title"),h.pc(4,"Dots"),h.Qb(),h.Qb(),h.nc(5,x,41,8,"mat-card-content",4),h.nc(6,C,12,0,"ng-template",null,5,h.oc),h.Rb(8,"mat-card-actions"),h.Rb(9,"button",6),h.Yb("click",(function(){return h.hc(t),h.ac().startGame()})),h.pc(10,"PLAY"),h.Qb(),h.Rb(11,"button",6),h.Yb("click",(function(){return h.hc(t),h.ac().toggleInformation()})),h.pc(12,"INSTRUCTIONS"),h.Qb(),h.nc(13,R,2,0,"button",7),h.Qb(),h.Qb(),h.Qb()}if(2&t){const t=h.fc(7),s=h.ac();h.Bb(5),h.dc("ngIf",!s.showingInformation)("ngIfElse",t),h.Bb(8),h.dc("ngIf",s.gameInitialized)}}function k(t,s){if(1&t){const t=h.Sb();h.Rb(0,"canvas",16,17),h.Yb("click",(function(s){return h.hc(t),h.ac().handleClick(s)})),h.Qb()}}const I=[{path:"",component:(()=>{class t{constructor(){this.gameStarted=!1,this.gameInitialized=!1,this.gameContinued=!1,this.showingInformation=!1,this.colors=["red","blue","green","purple","orange"]}onKeypress(t){"m"===t&&(this.gameStarted=!1)}ngAfterViewChecked(){this.gameStarted&&(this.gameInitialized?this.gameContinued&&(console.log(this.board),this.reinitializeGame()):this.initializeGame())}startGame(){this.gameStarted=!0,this.gameInitialized=!1}continueGame(){this.gameStarted=!0,this.gameContinued=!0}toggleInformation(){this.showingInformation=!this.showingInformation}initializeGame(){this.setCanvasDimensions(),this.board=o.boardBuilder(this.rows>3?this.rows:6,this.columns>3?this.columns:6,this.canvas.nativeElement.width,this.canvas.nativeElement.height,this.buildPlayers()),this.drawer=new c(this.canvas.nativeElement),this.drawer.draw(this.board,!0),this.gameInitialized=!0}reinitializeGame(){this.setCanvasDimensions(),this.drawer.setCanvas(this.canvas.nativeElement),this.drawer.draw(this.board,!0),this.gameContinued=!1}handleClick(t){this.board.handleClick(t),this.drawer.draw(this.board,!this.board.state.startingDot)}finishGame(){console.log("Game is over")}setCanvasDimensions(){this.canvas.nativeElement.width=innerWidth,this.canvas.nativeElement.height=innerHeight-40}buildPlayers(){return[r.playerBuilder(1,this.playerOneColor||"blue",this.playerOneName),r.playerBuilder(2,this.playerTwoColor||"red",this.playerTwoName)]}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=h.Gb({type:t,selectors:[["app-dots"]],viewQuery:function(t,s){var e;1&t&&h.sc(y,!0),2&t&&h.ec(e=h.Zb())&&(s.canvas=e.first)},hostBindings:function(t,s){1&t&&h.Yb("keydown",(function(t){return s.onKeypress(t.key)}),!1,h.gc)},decls:3,vars:2,consts:[["class","start-screen",4,"ngIf","ngIfElse"],["playing",""],[1,"start-screen"],[1,"card"],[4,"ngIf","ngIfElse"],["information",""],["mat-button","",3,"click"],["mat-button","",3,"click",4,"ngIf"],["appearance","outline"],["matInput","","placeholder","Rows",3,"ngModel","ngModelChange"],["matSuffix",""],["matInput","","placeholder","Columns",3,"ngModel","ngModelChange"],["matInput","","placeholder","Enter Name",3,"ngModel","ngModelChange"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"canvas",3,"click"],["dots",""]],template:function(t,s){if(1&t&&(h.nc(0,q,14,3,"div",0),h.nc(1,k,2,0,"ng-template",null,1,h.oc)),2&t){const t=h.fc(2);h.dc("ngIf",!s.gameStarted)("ngIfElse",t)}},directives:[l.j,d.a,d.d,d.f,d.b,u.b,d.c,g.b,g.e,b.a,p.a,p.f,p.h,m.a,g.f,f.a,v.h,l.i],styles:[".start-screen[_ngcontent-%COMP%]{width:100%;height:100%;margin-top:60px;display:flex;justify-content:center;align-items:center}mat-option[_ngcontent-%COMP%]{text-transform:capitalize}canvas[_ngcontent-%COMP%]{background-color:#fff}"]}),t})()}];let Q=(()=>{class t{}return t.\u0275mod=h.Kb({type:t}),t.\u0275inj=h.Jb({factory:function(s){return new(s||t)},imports:[[i.b.forChild(I)],i.b]}),t})(),S=(()=>{class t{}return t.\u0275mod=h.Kb({type:t}),t.\u0275inj=h.Jb({factory:function(s){return new(s||t)},imports:[[a.a,Q]]}),t})()}}]);
//# sourceMappingURL=games-dots-dots-module-es2015.7345908b6246631e0bf6.js.map