!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function s(t,s,a){return s&&e(t.prototype,s),a&&e(t,a),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{qFff:function(e,a,n){"use strict";n.r(a),n.d(a,"DotsModule",(function(){return B}));var i=n("PCNd"),o=n("iInd"),r=function(){function e(s){t(this,e),this.state=s}return s(e,[{key:"addConnection",value:function(t,e){switch(t.toLocaleLowerCase()){case"north":this.state.connections.north=e;break;case"east":this.state.connections.east=e;break;case"south":this.state.connections.south=e;break;case"west":this.state.connections.west=e}}}],[{key:"dotBuilder",value:function(t,s,a,n){return new e({id:"".concat(a).concat(n),x:t,y:s,column:a,row:n,radius:8,connections:{north:null,east:null,south:null,west:null}})}}]),e}(),c=function(){function e(s){t(this,e),this.state=s}return s(e,[{key:"handleClick",value:function(t){this.state.startingDot?this.endingMove(t):this.startingMove(t)}},{key:"startingMove",value:function(t){this.calculateDotClicked(t)&&this.getAvailableNeighbors()}},{key:"endingMove",value:function(t){var e=this.calculateDotClicked(t),s=this.state.totalSquaresLeft;e&&(this.makeConnections(),s===this.state.totalSquaresLeft&&this.changePlayer()),this.state.startingDot=null,this.state.endingDot=null}},{key:"changePlayer",value:function(){this.state.currentPlayer=this.state.players[(this.state.currentPlayer.state.id+1)%2]}},{key:"calculateDotClicked",value:function(t){var s,a,n,i,o,r,c,h,l,u=t.clientX,d=t.clientY;d-=40;var g=Math.floor(u/(this.state.width/this.state.columns)),f=Math.floor(d/(this.state.height/this.state.rows)),b=this.state.dots.get("".concat(e.parseIdx(g)).concat(e.parseIdx(f)));if(this.state.startingDot&&(null===(a=null===(s=this.state.currentNeighbors)||void 0===s?void 0:s.north)||void 0===a?void 0:a.state.id)!==b.state.id&&(null===(i=null===(n=this.state.currentNeighbors)||void 0===n?void 0:n.east)||void 0===i?void 0:i.state.id)!==b.state.id&&(null===(r=null===(o=this.state.currentNeighbors)||void 0===o?void 0:o.south)||void 0===r?void 0:r.state.id)!==b.state.id&&(null===(h=null===(c=this.state.currentNeighbors)||void 0===c?void 0:c.west)||void 0===h?void 0:h.state.id)!==b.state.id)return!1;var v=d-b.state.y,p=u-b.state.x;return Math.sqrt(v*v+p*p)<Math.floor(1.5*b.state.radius)?null!==this.state.startingDot&&(null===(l=this.state.startingDot)||void 0===l?void 0:l.state.id)!==b.state.id?(this.state.endingDot=b,!0):!this.state.startingDot&&(this.state.startingDot=b,!0):(this.state.startingDot=null,!1)}},{key:"getAvailableNeighbors",value:function(){var t,s,a,n,i=this.state.startingDot.state,o=i.column,r=i.row,c=this.state.startingDot.state.connections;!c.north&&r>0&&(t=this.state.dots.get("".concat(e.parseIdx(o)).concat(e.parseIdx(r-1)))),!c.east&&o<this.state.columns-1&&(s=this.state.dots.get("".concat(e.parseIdx(o+1)).concat(e.parseIdx(r)))),!c.south&&r<this.state.rows-1&&(a=this.state.dots.get("".concat(e.parseIdx(o)).concat(e.parseIdx(r+1)))),!c.west&&o>0&&(n=this.state.dots.get("".concat(e.parseIdx(o-1)).concat(e.parseIdx(r)))),this.state.currentNeighbors={north:t,east:s,south:a,west:n}}},{key:"makeConnections",value:function(){var t,e,s,a,n,i,o,r,c,h=this.state.currentNeighbors;(null===(t=h.north)||void 0===t?void 0:t.state.id)===(null===(e=this.state.endingDot)||void 0===e?void 0:e.state.id)&&(c="north",this.state.startingDot.addConnection("north",this.state.endingDot),this.state.endingDot.addConnection("south",this.state.startingDot)),(null===(s=h.east)||void 0===s?void 0:s.state.id)===(null===(a=this.state.endingDot)||void 0===a?void 0:a.state.id)&&(c="east",this.state.startingDot.addConnection("east",this.state.endingDot),this.state.endingDot.addConnection("west",this.state.startingDot)),(null===(n=h.south)||void 0===n?void 0:n.state.id)===(null===(i=this.state.endingDot)||void 0===i?void 0:i.state.id)&&(c="south",this.state.startingDot.addConnection("south",this.state.endingDot),this.state.endingDot.addConnection("north",this.state.startingDot)),(null===(o=h.west)||void 0===o?void 0:o.state.id)===(null===(r=this.state.endingDot)||void 0===r?void 0:r.state.id)&&(c="west",this.state.startingDot.addConnection("west",this.state.endingDot),this.state.endingDot.addConnection("east",this.state.startingDot)),this.detectFullSquare(c)}},{key:"detectFullSquare",value:function(t){"north"===t||"south"===t?(this.checkLeftSquare(t),this.checkRightSquare(t)):"west"!==t&&"east"!==t||(this.checkTopSquare(t),this.checkBottomSquare(t))}},{key:"checkLeftSquare",value:function(t){var e,s;(null===(e=this.state.startingDot)||void 0===e?void 0:e.state.connections.west)&&(null===(s=this.state.endingDot)||void 0===s?void 0:s.state.connections.west)&&this.state.startingDot.state.connections.west.state.connections[t]&&("north"===t?0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.endingDot.state.connections.west):this.state.players[1].state.squares.push(this.state.endingDot.state.connections.west):0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.startingDot.state.connections.west):this.state.players[1].state.squares.push(this.state.startingDot.state.connections.west),this.state.totalSquaresLeft--)}},{key:"checkRightSquare",value:function(t){var e,s;(null===(e=this.state.startingDot)||void 0===e?void 0:e.state.connections.east)&&(null===(s=this.state.endingDot)||void 0===s?void 0:s.state.connections.east)&&this.state.startingDot.state.connections.east.state.connections[t]&&("north"===t?0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.endingDot):this.state.players[1].state.squares.push(this.state.endingDot):0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.startingDot):this.state.players[1].state.squares.push(this.state.startingDot),this.state.totalSquaresLeft--)}},{key:"checkTopSquare",value:function(t){var e,s;(null===(e=this.state.startingDot)||void 0===e?void 0:e.state.connections.north)&&(null===(s=this.state.endingDot)||void 0===s?void 0:s.state.connections.north)&&this.state.startingDot.state.connections.north.state.connections[t]&&("west"===t?0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.endingDot.state.connections.north):this.state.players[1].state.squares.push(this.state.endingDot.state.connections.north):0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.startingDot.state.connections.north):this.state.players[1].state.squares.push(this.state.startingDot.state.connections.north),this.state.totalSquaresLeft--)}},{key:"checkBottomSquare",value:function(t){var e,s;(null===(e=this.state.startingDot)||void 0===e?void 0:e.state.connections.south)&&(null===(s=this.state.endingDot)||void 0===s?void 0:s.state.connections.south)&&this.state.startingDot.state.connections.south.state.connections[t]&&("west"===t?0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.endingDot):this.state.players[1].state.squares.push(this.state.endingDot):0===this.state.currentPlayer.state.id?this.state.players[0].state.squares.push(this.state.startingDot):this.state.players[1].state.squares.push(this.state.startingDot),this.state.totalSquaresLeft--)}}],[{key:"boardBuilder",value:function(t,s,a,n,i){for(var o=n/t,c=a/s,h=o/2,l=c/2,u=new Map,d=0;d<t;d++)for(var g=0;g<s;g++){var f=r.dotBuilder(g*c+l,d*o+h,g,d);u.set("".concat(e.parseIdx(g)).concat(e.parseIdx(d)),f)}return new e({dots:u,rows:t,columns:s,width:a,height:n,rowSpacing:o,columnSpacing:c,topPadding:h,sidePadding:l,totalSquaresLeft:(t-1)*(s-1),players:i,currentPlayer:i[0],startingDot:null,endingDot:null,currentNeighbors:null})}},{key:"parseIdx",value:function(t){return t<=9?"0"+t:""+t}}]),e}(),h=function(){function e(s){t(this,e),this.state=s}return s(e,null,[{key:"playerBuilder",value:function(t,s,a){return new e({id:t-1,name:a||"Player "+t,color:s,squares:[]})}}]),e}(),l=function(){function e(s){t(this,e),this.highlightRadius=16,this.canvas=s,this.ctx=this.canvas.getContext("2d")}return s(e,[{key:"draw",value:function(t,e){e?(this.clearCanvas(),this.drawPlayerBorder(t),this.drawDots(t.state.dots),this.fillSquares(t)):this.highlightDots(t)}},{key:"setCanvas",value:function(t){this.canvas=t,this.ctx=this.canvas.getContext("2d")}},{key:"highlightDots",value:function(t){this.highlightClickedDot(t.state.startingDot),this.highlightNeighbors(t)}},{key:"clearCanvas",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"drawPlayerBorder",value:function(t){this.ctx.strokeStyle=t.state.currentPlayer.state.color,this.ctx.lineWidth=30,this.ctx.strokeRect(0,0,this.canvas.width,this.canvas.height)}},{key:"drawDots",value:function(t){var e=this;t.forEach((function(t){e.drawDot(t,!1),e.drawConnections(t)}))}},{key:"drawDot",value:function(t,e){this.ctx.fillStyle=e?"pink":"black",this.ctx.beginPath(),this.ctx.arc(t.state.x,t.state.y,t.state.radius,0,2*Math.PI,!0),this.ctx.fill()}},{key:"drawConnections",value:function(t){var e=t.state.connections,s=e.north,a=e.east,n=e.south,i=e.west;this.ctx.strokeStyle="black",this.ctx.lineWidth=6,this.ctx.beginPath(),this.ctx.moveTo(t.state.x,t.state.y),s&&(this.ctx.lineTo(s.state.x,s.state.y),this.ctx.moveTo(t.state.x,t.state.y)),a&&(this.ctx.lineTo(a.state.x,a.state.y),this.ctx.moveTo(t.state.x,t.state.y)),n&&(this.ctx.lineTo(n.state.x,n.state.y),this.ctx.moveTo(t.state.x,t.state.y)),i&&this.ctx.lineTo(i.state.x,i.state.y),this.ctx.stroke()}},{key:"fillSquare",value:function(t,e,s,a){this.ctx.fillStyle=e.state.color,this.ctx.fillRect(t.state.x,t.state.y,s,a)}},{key:"fillSquares",value:function(t){var e=this,s=t.state.columnSpacing,a=t.state.rowSpacing,n=t.state.players[0];n.state.squares.forEach((function(t){e.fillSquare(t,n,s,a)}));var i=t.state.players[1];t.state.players[1].state.squares.forEach((function(t){e.fillSquare(t,i,s,a)}))}},{key:"highlightClickedDot",value:function(t){this.drawDot(t,!0)}},{key:"highlightNeighbors",value:function(t){var e=t.state.currentNeighbors,s=e.north,a=e.east,n=e.south,i=e.west;this.ctx.strokeStyle="goldenrod",this.ctx.lineWidth=4,this.ctx.beginPath(),s&&this.ctx.arc(s.state.x,s.state.y,this.highlightRadius,0,2*Math.PI,!0),a&&(this.ctx.moveTo(a.state.x+this.highlightRadius,a.state.y),this.ctx.arc(a.state.x,a.state.y,this.highlightRadius,0,2*Math.PI,!0)),n&&(this.ctx.moveTo(n.state.x+this.highlightRadius,n.state.y),this.ctx.arc(n.state.x,n.state.y,this.highlightRadius,0,2*Math.PI,!0)),i&&(this.ctx.moveTo(i.state.x+this.highlightRadius,i.state.y),this.ctx.arc(i.state.x,i.state.y,this.highlightRadius,0,2*Math.PI,!0)),this.ctx.stroke()}}]),e}(),u=n("8Y7J"),d=n("SVse"),g=n("PDjf"),f=n("Dxy4"),b=n("Q2Ze"),v=n("e6WT"),p=n("s7LF"),m=n("Tj54"),y=n("ZTz/"),w=n("UhP/"),k=["dots"];function D(t,e){if(1&t&&(u.Rb(0,"mat-option",15),u.pc(1),u.Qb()),2&t){var s=e.$implicit;u.dc("value",s),u.Bb(1),u.qc(s)}}function x(t,e){if(1&t&&(u.Rb(0,"mat-option",15),u.pc(1),u.Qb()),2&t){var s=e.$implicit;u.dc("value",s),u.Bb(1),u.qc(s)}}function C(t,e){if(1&t){var s=u.Sb();u.Rb(0,"mat-card-content"),u.Rb(1,"mat-form-field",8),u.Rb(2,"mat-label"),u.pc(3,"Number of Rows"),u.Qb(),u.Rb(4,"input",9),u.Yb("ngModelChange",(function(t){return u.hc(s),u.ac(2).rows=t})),u.Qb(),u.Rb(5,"mat-icon",10),u.pc(6,"scatter_plot"),u.Qb(),u.Qb(),u.Rb(7,"mat-form-field",8),u.Rb(8,"mat-label"),u.pc(9,"Number of Columns"),u.Qb(),u.Rb(10,"input",11),u.Yb("ngModelChange",(function(t){return u.hc(s),u.ac(2).columns=t})),u.Qb(),u.Rb(11,"mat-icon",10),u.pc(12,"scatter_plot"),u.Qb(),u.Qb(),u.Rb(13,"mat-card"),u.Rb(14,"mat-form-field",8),u.Rb(15,"mat-label"),u.pc(16,"Player 1 Name"),u.Qb(),u.Rb(17,"input",12),u.Yb("ngModelChange",(function(t){return u.hc(s),u.ac(2).playerOneName=t})),u.Qb(),u.Rb(18,"mat-icon",10),u.pc(19,"face"),u.Qb(),u.Qb(),u.Rb(20,"mat-form-field",8),u.Rb(21,"mat-label"),u.pc(22,"Color"),u.Qb(),u.Rb(23,"mat-select",13),u.Yb("valueChange",(function(t){return u.hc(s),u.ac(2).playerOneColor=t})),u.Rb(24,"mat-option"),u.pc(25,"None"),u.Qb(),u.nc(26,D,2,2,"mat-option",14),u.Qb(),u.Qb(),u.Qb(),u.Rb(27,"mat-card"),u.Rb(28,"mat-form-field",8),u.Rb(29,"mat-label"),u.pc(30,"Player 2 Name"),u.Qb(),u.Rb(31,"input",12),u.Yb("ngModelChange",(function(t){return u.hc(s),u.ac(2).playerTwoName=t})),u.Qb(),u.Rb(32,"mat-icon",10),u.pc(33,"face"),u.Qb(),u.Qb(),u.Rb(34,"mat-form-field",8),u.Rb(35,"mat-label"),u.pc(36,"Color"),u.Qb(),u.Rb(37,"mat-select",13),u.Yb("valueChange",(function(t){return u.hc(s),u.ac(2).playerTwoColor=t})),u.Rb(38,"mat-option"),u.pc(39,"None"),u.Qb(),u.nc(40,x,2,2,"mat-option",14),u.Qb(),u.Qb(),u.Qb(),u.Qb()}if(2&t){var a=u.ac(2);u.Bb(4),u.dc("ngModel",a.rows),u.Bb(6),u.dc("ngModel",a.columns),u.Bb(7),u.dc("ngModel",a.playerOneName),u.Bb(6),u.dc("value",a.playerOneColor),u.Bb(3),u.dc("ngForOf",a.colors),u.Bb(5),u.dc("ngModel",a.playerTwoName),u.Bb(6),u.dc("value",a.playerTwoColor),u.Bb(3),u.dc("ngForOf",a.colors)}}function R(t,e){1&t&&(u.Rb(0,"mat-card-content"),u.Rb(1,"h3"),u.pc(2,"Information"),u.Qb(),u.Rb(3,"ul"),u.Rb(4,"li"),u.pc(5,"Connect dots to make squares"),u.Qb(),u.Rb(6,"li"),u.pc(7,"Making Squares gives you an extra turn"),u.Qb(),u.Rb(8,"li"),u.pc(9,"Person who makes the most squares wins"),u.Qb(),u.Rb(10,"li"),u.pc(11,"Press 'm' for the menu"),u.Qb(),u.Qb(),u.Qb())}function q(t,e){if(1&t){var s=u.Sb();u.Rb(0,"button",6),u.Yb("click",(function(){return u.hc(s),u.ac(2).continueGame()})),u.pc(1,"CONTINUE"),u.Qb()}}function I(t,e){if(1&t){var s=u.Sb();u.Rb(0,"div",2),u.Rb(1,"mat-card",3),u.Rb(2,"mat-card-header"),u.Rb(3,"mat-card-title"),u.pc(4,"Dots"),u.Qb(),u.Qb(),u.nc(5,C,41,8,"mat-card-content",4),u.nc(6,R,12,0,"ng-template",null,5,u.oc),u.Rb(8,"mat-card-actions"),u.Rb(9,"button",6),u.Yb("click",(function(){return u.hc(s),u.ac().startGame()})),u.pc(10,"PLAY"),u.Qb(),u.Rb(11,"button",6),u.Yb("click",(function(){return u.hc(s),u.ac().toggleInformation()})),u.pc(12,"INSTRUCTIONS"),u.Qb(),u.nc(13,q,2,0,"button",7),u.Qb(),u.Qb(),u.Qb()}if(2&t){var a=u.fc(7),n=u.ac();u.Bb(5),u.dc("ngIf",!n.showingInformation)("ngIfElse",a),u.Bb(8),u.dc("ngIf",n.gameInitialized)}}function Q(t,e){if(1&t){var s=u.Sb();u.Rb(0,"canvas",16,17),u.Yb("click",(function(t){return u.hc(s),u.ac().handleClick(t)})),u.Qb()}}var S,P,M,N=[{path:"",component:(S=function(){function e(){t(this,e),this.gameStarted=!1,this.gameInitialized=!1,this.gameContinued=!1,this.showingInformation=!1,this.colors=["red","blue","green","purple","orange"]}return s(e,[{key:"onKeypress",value:function(t){"m"===t&&(this.gameStarted=!1)}},{key:"ngAfterViewChecked",value:function(){this.gameStarted&&(this.gameInitialized?this.gameContinued&&(console.log(this.board),this.reinitializeGame()):this.initializeGame())}},{key:"startGame",value:function(){this.gameStarted=!0,this.gameInitialized=!1}},{key:"continueGame",value:function(){this.gameStarted=!0,this.gameContinued=!0}},{key:"toggleInformation",value:function(){this.showingInformation=!this.showingInformation}},{key:"initializeGame",value:function(){this.setCanvasDimensions(),this.board=c.boardBuilder(this.rows>3?this.rows:6,this.columns>3?this.columns:6,this.canvas.nativeElement.width,this.canvas.nativeElement.height,this.buildPlayers()),this.drawer=new l(this.canvas.nativeElement),this.drawer.draw(this.board,!0),this.gameInitialized=!0}},{key:"reinitializeGame",value:function(){this.setCanvasDimensions(),this.drawer.setCanvas(this.canvas.nativeElement),this.drawer.draw(this.board,!0),this.gameContinued=!1}},{key:"handleClick",value:function(t){this.board.handleClick(t),this.drawer.draw(this.board,!this.board.state.startingDot)}},{key:"finishGame",value:function(){console.log("Game is over")}},{key:"setCanvasDimensions",value:function(){this.canvas.nativeElement.width=innerWidth,this.canvas.nativeElement.height=innerHeight-40}},{key:"buildPlayers",value:function(){return[h.playerBuilder(1,this.playerOneColor||"blue",this.playerOneName),h.playerBuilder(2,this.playerTwoColor||"red",this.playerTwoName)]}}]),e}(),S.\u0275fac=function(t){return new(t||S)},S.\u0275cmp=u.Gb({type:S,selectors:[["app-dots"]],viewQuery:function(t,e){var s;1&t&&u.sc(k,!0),2&t&&u.ec(s=u.Zb())&&(e.canvas=s.first)},hostBindings:function(t,e){1&t&&u.Yb("keydown",(function(t){return e.onKeypress(t.key)}),!1,u.gc)},decls:3,vars:2,consts:[["class","start-screen",4,"ngIf","ngIfElse"],["playing",""],[1,"start-screen"],[1,"card"],[4,"ngIf","ngIfElse"],["information",""],["mat-button","",3,"click"],["mat-button","",3,"click",4,"ngIf"],["appearance","outline"],["matInput","","placeholder","Rows",3,"ngModel","ngModelChange"],["matSuffix",""],["matInput","","placeholder","Columns",3,"ngModel","ngModelChange"],["matInput","","placeholder","Enter Name",3,"ngModel","ngModelChange"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"canvas",3,"click"],["dots",""]],template:function(t,e){if(1&t&&(u.nc(0,I,14,3,"div",0),u.nc(1,Q,2,0,"ng-template",null,1,u.oc)),2&t){var s=u.fc(2);u.dc("ngIf",!e.gameStarted)("ngIfElse",s)}},directives:[d.j,g.a,g.d,g.f,g.b,f.b,g.c,b.b,b.e,v.a,p.a,p.f,p.h,m.a,b.f,y.a,w.h,d.i],styles:[".start-screen[_ngcontent-%COMP%]{width:100%;height:100%;margin-top:60px;display:flex;justify-content:center;align-items:center}mat-option[_ngcontent-%COMP%]{text-transform:capitalize}canvas[_ngcontent-%COMP%]{background-color:#fff}"]}),S)}],T=((M=function e(){t(this,e)}).\u0275mod=u.Kb({type:M}),M.\u0275inj=u.Jb({factory:function(t){return new(t||M)},imports:[[o.b.forChild(N)],o.b]}),M),B=((P=function e(){t(this,e)}).\u0275mod=u.Kb({type:P}),P.\u0275inj=u.Jb({factory:function(t){return new(t||P)},imports:[[i.a,T]]}),P)}}])}();
//# sourceMappingURL=games-dots-dots-module-es5.7345908b6246631e0bf6.js.map